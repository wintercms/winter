!function(t){var e=function(e,i){var n=i.getElementsByClassName(e)[0];if(!n&&((n=document.createElement("canvas")).className=e,n.style.direction="ltr",n.style.position="absolute",n.style.left="0px",n.style.top="0px",i.appendChild(n),!n.getContext))throw new Error("Canvas is not available.");this.element=n;var r=this.context=n.getContext("2d");this.pixelRatio=t.plot.browser.getPixelRatio(r);var l=t(i).width(),o=t(i).height();this.resize(l,o),this.SVGContainer=null,this.SVG={},this._textCache={}};function i(t,e){t.transform.baseVal.clear(),e&&e.forEach((function(e){t.transform.baseVal.appendItem(e)}))}e.prototype.resize=function(t,e){t=t<10?10:t,e=e<10?10:e;var i=this.element,n=this.context,r=this.pixelRatio;this.width!==t&&(i.width=t*r,i.style.width=t+"px",this.width=t),this.height!==e&&(i.height=e*r,i.style.height=e+"px",this.height=e),n.restore(),n.save(),n.scale(r,r)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(hasOwnProperty.call(t,e)){var i=this.getSVGLayer(e),n=t[e],r=i.style.display;for(var l in i.style.display="none",n)if(hasOwnProperty.call(n,l)){var o=n[l];for(var s in o)if(hasOwnProperty.call(o,s)){for(var a,h=o[s],d=h.positions,p=0;d[p];p++)if((a=d[p]).active)a.rendered||(i.appendChild(a.element),a.rendered=!0);else if(d.splice(p--,1),a.rendered){for(;a.element.firstChild;)a.element.removeChild(a.element.firstChild);a.element.parentNode.removeChild(a.element)}0===d.length&&(h.measured?h.measured=!1:delete o[s])}}i.style.display=r}},e.prototype.getSVGLayer=function(t){var e,i=this.SVG[t];i||(this.SVGContainer?e=this.SVGContainer.firstChild:(this.SVGContainer=document.createElement("div"),this.SVGContainer.className="flot-svg",this.SVGContainer.style.position="absolute",this.SVGContainer.style.top="0px",this.SVGContainer.style.left="0px",this.SVGContainer.style.height="100%",this.SVGContainer.style.width="100%",this.SVGContainer.style.pointerEvents="none",this.element.parentNode.appendChild(this.SVGContainer),(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).style.width="100%",e.style.height="100%",this.SVGContainer.appendChild(e)),(i=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("class",t),i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.bottom="0px",i.style.right="0px",e.appendChild(i),this.SVG[t]=i);return i},e.prototype.getTextInfo=function(t,e,i,r,l){var o,s,a,h;e=""+e,o="object"==typeof i?i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:i,null==(s=this._textCache[t])&&(s=this._textCache[t]={}),null==(a=s[o])&&(a=s[o]={});var d=function(t){return t.replace(/0|1|2|3|4|5|6|7|8|9/g,"0")}(e);if(!(h=a[d])){var p=document.createElementNS("http://www.w3.org/2000/svg","text");if(-1!==e.indexOf("<br>"))n(e,p,-9999);else{var c=document.createTextNode(e);p.appendChild(c)}p.style.position="absolute",p.style.maxWidth=l,p.setAttributeNS(null,"x",-9999),p.setAttributeNS(null,"y",-9999),"object"==typeof i?(p.style.font=o,p.style.fill=i.fill):"string"==typeof i&&p.setAttribute("class",i),this.getSVGLayer(t).appendChild(p);var f=p.getBBox();for(h=a[d]={width:f.width,height:f.height,measured:!0,element:p,positions:[]};p.firstChild;)p.removeChild(p.firstChild);p.parentNode.removeChild(p)}return h.measured=!0,h},e.prototype.addText=function(t,e,r,l,o,s,a,h,d,p){var c=this.getTextInfo(t,l,o,s,a),f=c.positions;"center"===h?e-=c.width/2:"right"===h&&(e-=c.width),"middle"===d?r-=c.height/2:"bottom"===d&&(r-=c.height),r+=.75*c.height;for(var y,m=0;f[m];m++){if((y=f[m]).x===e&&y.y===r&&y.text===l)return y.active=!0,void i(y.element,p);if(!1===y.active)return y.active=!0,y.text=l,-1!==l.indexOf("<br>")?(r-=.25*c.height,n(l,y.element,e)):y.element.textContent=l,y.element.setAttributeNS(null,"x",e),y.element.setAttributeNS(null,"y",r),y.x=e,y.y=r,void i(y.element,p)}y={active:!0,rendered:!1,element:f.length?c.element.cloneNode():c.element,text:l,x:e,y:r},f.push(y),-1!==l.indexOf("<br>")?(r-=.25*c.height,n(l,y.element,e)):y.element.textContent=l,y.element.setAttributeNS(null,"x",e),y.element.setAttributeNS(null,"y",r),y.element.style.textAlign=h,i(y.element,p)};var n=function(t,e,i){var n,r,l,o=t.split("<br>");for(r=0;r<o.length;r++)e.childNodes[r]?n=e.childNodes[r]:(n=document.createElementNS("http://www.w3.org/2000/svg","tspan"),e.appendChild(n)),n.textContent=o[r],l=(0===r?0:1)+"em",n.setAttributeNS(null,"dy",l),n.setAttributeNS(null,"x",i)};e.prototype.removeText=function(t,e,i,n,r,l){var o,s;if(null==n){var a=this._textCache[t];if(null!=a)for(var h in a)if(hasOwnProperty.call(a,h)){var d=a[h];for(var p in d)if(hasOwnProperty.call(d,p)){var c=d[p].positions;c.forEach((function(t){t.active=!1}))}}}else(c=(o=this.getTextInfo(t,n,r,l)).positions).forEach((function(t){s=i+.75*o.height,t.x===e&&t.y===s&&t.text===n&&(t.active=!1)}))},e.prototype.clearCache=function(){var t=this._textCache;for(var e in t)if(hasOwnProperty.call(t,e))for(var i=this.getSVGLayer(e);i.firstChild;)i.removeChild(i.firstChild);this._textCache={}},window.Flot||(window.Flot={}),window.Flot.Canvas=e}(jQuery);
